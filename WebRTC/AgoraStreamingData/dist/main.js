(()=>{let e,a,t,c=null;fetch("APP_ID").then((e=>e.text())).then((e=>(c=e,console.log(e),e))).catch((e=>{console.log(e)}));const n={iceServers:[{urls:["stun:stun1.1.google.com:19302","stun:stun2.1.google.com:19302"]}]},o=e=>document.getElementById(`user-${e}`);(async()=>{let c=o(1);c.muted=!0,e=await navigator.mediaDevices.getUserMedia({video:!0,audio:!0}),c.srcObject=e,c.addEventListener("loadedmetadata",(()=>{c.play()})),c.append(e),(async()=>{t=new RTCPeerConnection(n);let c=o(2);a=new MediaStream,c.srcObject=a,c.addEventListener("loadedmetadata",(()=>{c.play()})),c.append(a),e.getTracks().forEach((a=>{t.addTrack(a,e)})),t.ontrack=e=>{e.streams[0].getTracks().forEach((e=>{a.addTrack(e)}))},t.onicecandidate=async e=>{e.candidate&&console.log("new ice candidate:",e.candidate)};let d=await t.createOffer();await t.setLocalDescription(d),console.log(d)})()})()})();